"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));

var _chai = _interopRequireDefault(require("chai"));

var _chaiAsPromised = _interopRequireDefault(require("chai-as-promised"));

var _ = _interopRequireDefault(require("../.."));

var _path = _interopRequireDefault(require("path"));

var _helpers = require("../../lib/helpers.js");

var _setup = require("./setup");

var _appiumSupport = require("appium-support");

var _temp = _interopRequireDefault(require("temp"));

_chai.default.should();

_chai.default.use(_chaiAsPromised.default);

let expect = _chai.default.expect;

const IME = 'com.example.android.softkeyboard/.SoftKeyboard',
      defaultIMEs = ['com.android.inputmethod.latin/.LatinIME', 'com.google.android.inputmethod.latin/com.android.inputmethod.latin.LatinIME', 'io.appium.android.ime/.UnicodeIME'],
      contactManagerPath = _path.default.resolve(_helpers.rootDir, 'test', 'fixtures', 'ContactManager.apk'),
      pkg = 'com.example.android.contactmanager',
      activity = 'ContactManager';

describe('adb commands', function () {
  this.timeout(_setup.MOCHA_TIMEOUT);
  let adb;
  before((0, _asyncToGenerator2.default)(function* () {
    adb = yield _.default.createADB({
      adbExecTimeout: 60000
    });
  }));
  it('getApiLevel should get correct api level', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.getApiLevel()).should.equal(_setup.apiLevel);
  }));
  it('getPlatformVersion should get correct platform version', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.getPlatformVersion()).should.include(_setup.platformVersion);
  }));
  it('availableIMEs should get list of available IMEs', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.availableIMEs()).should.have.length.above(0);
  }));
  it('enabledIMEs should get list of enabled IMEs', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.enabledIMEs()).should.have.length.above(0);
  }));
  it('defaultIME should get default IME', (0, _asyncToGenerator2.default)(function* () {
    const defaultIME = yield adb.defaultIME();

    if (defaultIME) {
      defaultIMEs.should.include(defaultIME);
    }
  }));
  it('enableIME and disableIME should enable and disble IME', (0, _asyncToGenerator2.default)(function* () {
    yield adb.disableIME(IME);
    (yield adb.enabledIMEs()).should.not.include(IME);
    yield adb.enableIME(IME);
    (yield adb.enabledIMEs()).should.include(IME);
    yield adb.enabledIMEs();
  }));
  it('processExists should be able to find ui process', (0, _asyncToGenerator2.default)(function* () {
    if (process.env.TRAVIS) {
      return this.skip();
    }

    (yield adb.processExists('com.android.systemui')).should.be.true;
  }));
  it('ping should return true', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.ping()).should.be.true;
  }));
  it('getPIDsByName should return pids', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.getPIDsByName('m.android.phone')).should.have.length.above(0);
  }));
  it('killProcessesByName should kill process', (0, _asyncToGenerator2.default)(function* () {
    yield adb.install(contactManagerPath);
    yield adb.startApp({
      pkg,
      activity
    });
    yield adb.killProcessesByName(pkg);
    (yield adb.getPIDsByName(pkg)).should.have.length(0);
  }));
  it('killProcessByPID should kill process', (0, _asyncToGenerator2.default)(function* () {
    yield adb.install(contactManagerPath);
    yield adb.startApp({
      pkg,
      activity
    });
    let pids = yield adb.getPIDsByName(pkg);
    pids.should.have.length.above(0);
    yield adb.killProcessByPID(pids[0]);
    (yield adb.getPIDsByName(pkg)).length.should.equal(0);
  }));
  it('should get device language and country', (0, _asyncToGenerator2.default)(function* () {
    if (parseInt(_setup.apiLevel, 10) >= 23) return this.skip();
    if (process.env.TRAVIS) return this.skip();
    ['en', 'fr'].should.contain((yield adb.getDeviceSysLanguage()));
    ['US', 'EN_US', 'EN', 'FR'].should.contain((yield adb.getDeviceSysCountry()));
  }));
  it('should set device language and country', (0, _asyncToGenerator2.default)(function* () {
    if (parseInt(_setup.apiLevel, 10) >= 23) return this.skip();
    if (process.env.TRAVIS) return this.skip();
    yield adb.setDeviceSysLanguage('fr');
    yield adb.setDeviceSysCountry('fr');
    yield adb.reboot();
    yield adb.getDeviceSysLanguage().should.eventually.equal('fr');
    yield adb.getDeviceSysCountry().should.eventually.equal('FR');
    yield adb.setDeviceSysLanguage('en');
    yield adb.setDeviceSysCountry('us');
  }));
  it('should get device locale', (0, _asyncToGenerator2.default)(function* () {
    if (parseInt(_setup.apiLevel, 10) < 23) return this.skip();
    yield adb.setDeviceSysLocaleViaSettingApp('en', 'US');
    ['us', 'en', 'ca_en', 'en-US'].should.contain((yield adb.getDeviceLocale()));
  }));
  it('should forward the port', (0, _asyncToGenerator2.default)(function* () {
    yield adb.forwardPort(4724, 4724);
  }));
  it('should remove forwarded port', (0, _asyncToGenerator2.default)(function* () {
    yield adb.forwardPort(8200, 6790);
    (yield adb.adbExec([`forward`, `--list`])).should.contain('tcp:8200');
    yield adb.removePortForward(8200);
    (yield adb.adbExec([`forward`, `--list`])).should.not.contain('tcp:8200');
  }));
  it('should start logcat from adb', (0, _asyncToGenerator2.default)(function* () {
    yield adb.startLogcat();
    let logs = adb.logcat.getLogs();
    logs.should.have.length.above(0);
    yield adb.stopLogcat();
  }));
  it('should get model', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.getModel()).should.not.be.null;
  }));
  it('should get manufacturer', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.getManufacturer()).should.not.be.null;
  }));
  it('should get screen size', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.getScreenSize()).should.not.be.null;
  }));
  it('should get screen density', (0, _asyncToGenerator2.default)(function* () {
    (yield adb.getScreenDensity()).should.not.be.null;
  }));
  it('should be able to toggle gps location provider', (0, _asyncToGenerator2.default)(function* () {
    yield adb.toggleGPSLocationProvider(true);
    (yield adb.getLocationProviders()).should.include('gps');
    yield adb.toggleGPSLocationProvider(false);
    (yield adb.getLocationProviders()).should.not.include('gps');
  }));
  it('should be able to toogle airplane mode', (0, _asyncToGenerator2.default)(function* () {
    yield adb.setAirplaneMode(true);
    (yield adb.isAirplaneModeOn()).should.be.true;
    yield adb.setAirplaneMode(false);
    (yield adb.isAirplaneModeOn()).should.be.false;
  }));
  it('should be able to toogle wifi @skip-ci', (0, _asyncToGenerator2.default)(function* () {
    this.retries(3);
    yield adb.setWifiState(true);
    (yield adb.isWifiOn()).should.be.true;
    yield adb.setWifiState(false);
    (yield adb.isWifiOn()).should.be.false;
  }));
  it('should be able to turn off animation @skip-ci', (0, _asyncToGenerator2.default)(function* () {
    yield adb.grantPermission('io.appium.settings', 'android.permission.SET_ANIMATION_SCALE');
    yield adb.setAnimationState(false);
    (yield adb.isAnimationOn()).should.be.false;
  }));
  it('should be able to turn on animation @skip-ci', (0, _asyncToGenerator2.default)(function* () {
    yield adb.grantPermission('io.appium.settings', 'android.permission.SET_ANIMATION_SCALE');
    yield adb.setAnimationState(true);
    (yield adb.isAnimationOn()).should.be.true;
  }));
  it('should be able to set device locale via setting app @skip-ci', (0, _asyncToGenerator2.default)(function* () {
    yield adb.grantPermission('io.appium.settings', 'android.permission.CHANGE_CONFIGURATION');
    yield adb.setDeviceSysLocaleViaSettingApp('fr', 'fr');
    (yield adb.getDeviceSysLocale()).should.equal('fr-FR');
    yield adb.setDeviceSysLocaleViaSettingApp('zh', 'CN', 'Hans');
    (yield adb.getDeviceSysLocale()).should.equal('zh-Hans-CN');
    yield adb.setDeviceSysLocaleViaSettingApp('en', 'us');
    (yield adb.getDeviceSysLocale()).should.equal('en-US');
  }));
  describe('app permissions', function () {
    before((0, _asyncToGenerator2.default)(function* () {
      let deviceApiLevel = yield adb.getApiLevel();

      if (deviceApiLevel < 23) {
        return this.skip();
      }

      let isInstalled = yield adb.isAppInstalled('io.appium.android.apis');

      if (isInstalled) {
        yield adb.uninstallApk('io.appium.android.apis');
      }
    }));
    it('should install and grant all permission', (0, _asyncToGenerator2.default)(function* () {
      let apiDemos = _path.default.resolve(_helpers.rootDir, 'test', 'fixtures', 'ApiDemos-debug.apk');

      yield adb.install(apiDemos);
      (yield adb.isAppInstalled('io.appium.android.apis')).should.be.true;
      yield adb.grantAllPermissions('io.appium.android.apis');
      let requestedPermissions = yield adb.getReqPermissions('io.appium.android.apis');
      expect((yield adb.getGrantedPermissions('io.appium.android.apis'))).to.have.members(requestedPermissions);
    }));
    it('should revoke permission', (0, _asyncToGenerator2.default)(function* () {
      yield adb.revokePermission('io.appium.android.apis', 'android.permission.RECEIVE_SMS');
      expect((yield adb.getGrantedPermissions('io.appium.android.apis'))).to.not.have.members(['android.permission.RECEIVE_SMS']);
    }));
    it('should grant permission', (0, _asyncToGenerator2.default)(function* () {
      yield adb.grantPermission('io.appium.android.apis', 'android.permission.RECEIVE_SMS');
      expect((yield adb.getGrantedPermissions('io.appium.android.apis'))).to.include.members(['android.permission.RECEIVE_SMS']);
    }));
  });
  describe('push file', function () {
    function getRandomDir() {
      return `/data/local/tmp/test${Math.random()}`;
    }

    let localFile = _temp.default.path({
      prefix: 'appium',
      suffix: '.tmp'
    });

    let tempFile = _temp.default.path({
      prefix: 'appium',
      suffix: '.tmp'
    });

    const stringData = `random string data ${Math.random()}`;
    before((0, _asyncToGenerator2.default)(function* () {
      yield (0, _appiumSupport.mkdirp)(_path.default.dirname(localFile));
      yield (0, _appiumSupport.mkdirp)(_path.default.dirname(tempFile));
      yield _appiumSupport.fs.writeFile(localFile, stringData);
    }));
    after((0, _asyncToGenerator2.default)(function* () {
      if (yield _appiumSupport.fs.exists(localFile)) {
        yield _appiumSupport.fs.unlink(localFile);
      }
    }));
    afterEach((0, _asyncToGenerator2.default)(function* () {
      if (yield _appiumSupport.fs.exists(tempFile)) {
        yield _appiumSupport.fs.unlink(tempFile);
      }
    }));
    it('should push file to a valid location', (0, _asyncToGenerator2.default)(function* () {
      let remoteFile = `${getRandomDir()}/remote.txt`;
      yield adb.push(localFile, remoteFile);
      yield adb.pull(remoteFile, tempFile);
      let remoteData = yield _appiumSupport.fs.readFile(tempFile);
      remoteData.toString().should.equal(stringData);
    }));
    it('should throw error if it cannot write to the remote file', (0, _asyncToGenerator2.default)(function* () {
      let remoteFile = '/foo/bar/remote.txt';
      yield adb.push(localFile, remoteFile).should.be.rejectedWith(/\/foo\/bar\/remote.txt/);
    }));
  });
  describe('bugreport', function () {
    it('should return the report as a raw string', (0, _asyncToGenerator2.default)(function* () {
      if (process.env.TRAVIS) {
        return this.skip;
      }

      (yield adb.bugreport()).should.be.a('string');
    }));
  });
});require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvZnVuY3Rpb25hbC9hZGItY29tbWFuZHMtZTJlLXNwZWNzLmpzIl0sIm5hbWVzIjpbImNoYWkiLCJzaG91bGQiLCJ1c2UiLCJjaGFpQXNQcm9taXNlZCIsImV4cGVjdCIsIklNRSIsImRlZmF1bHRJTUVzIiwiY29udGFjdE1hbmFnZXJQYXRoIiwicGF0aCIsInJlc29sdmUiLCJyb290RGlyIiwicGtnIiwiYWN0aXZpdHkiLCJkZXNjcmliZSIsInRpbWVvdXQiLCJNT0NIQV9USU1FT1VUIiwiYWRiIiwiYmVmb3JlIiwiQURCIiwiY3JlYXRlQURCIiwiYWRiRXhlY1RpbWVvdXQiLCJpdCIsImdldEFwaUxldmVsIiwiZXF1YWwiLCJhcGlMZXZlbCIsImdldFBsYXRmb3JtVmVyc2lvbiIsImluY2x1ZGUiLCJwbGF0Zm9ybVZlcnNpb24iLCJhdmFpbGFibGVJTUVzIiwiaGF2ZSIsImxlbmd0aCIsImFib3ZlIiwiZW5hYmxlZElNRXMiLCJkZWZhdWx0SU1FIiwiZGlzYWJsZUlNRSIsIm5vdCIsImVuYWJsZUlNRSIsInByb2Nlc3MiLCJlbnYiLCJUUkFWSVMiLCJza2lwIiwicHJvY2Vzc0V4aXN0cyIsImJlIiwidHJ1ZSIsInBpbmciLCJnZXRQSURzQnlOYW1lIiwiaW5zdGFsbCIsInN0YXJ0QXBwIiwia2lsbFByb2Nlc3Nlc0J5TmFtZSIsInBpZHMiLCJraWxsUHJvY2Vzc0J5UElEIiwicGFyc2VJbnQiLCJjb250YWluIiwiZ2V0RGV2aWNlU3lzTGFuZ3VhZ2UiLCJnZXREZXZpY2VTeXNDb3VudHJ5Iiwic2V0RGV2aWNlU3lzTGFuZ3VhZ2UiLCJzZXREZXZpY2VTeXNDb3VudHJ5IiwicmVib290IiwiZXZlbnR1YWxseSIsInNldERldmljZVN5c0xvY2FsZVZpYVNldHRpbmdBcHAiLCJnZXREZXZpY2VMb2NhbGUiLCJmb3J3YXJkUG9ydCIsImFkYkV4ZWMiLCJyZW1vdmVQb3J0Rm9yd2FyZCIsInN0YXJ0TG9nY2F0IiwibG9ncyIsImxvZ2NhdCIsImdldExvZ3MiLCJzdG9wTG9nY2F0IiwiZ2V0TW9kZWwiLCJudWxsIiwiZ2V0TWFudWZhY3R1cmVyIiwiZ2V0U2NyZWVuU2l6ZSIsImdldFNjcmVlbkRlbnNpdHkiLCJ0b2dnbGVHUFNMb2NhdGlvblByb3ZpZGVyIiwiZ2V0TG9jYXRpb25Qcm92aWRlcnMiLCJzZXRBaXJwbGFuZU1vZGUiLCJpc0FpcnBsYW5lTW9kZU9uIiwiZmFsc2UiLCJyZXRyaWVzIiwic2V0V2lmaVN0YXRlIiwiaXNXaWZpT24iLCJncmFudFBlcm1pc3Npb24iLCJzZXRBbmltYXRpb25TdGF0ZSIsImlzQW5pbWF0aW9uT24iLCJnZXREZXZpY2VTeXNMb2NhbGUiLCJkZXZpY2VBcGlMZXZlbCIsImlzSW5zdGFsbGVkIiwiaXNBcHBJbnN0YWxsZWQiLCJ1bmluc3RhbGxBcGsiLCJhcGlEZW1vcyIsImdyYW50QWxsUGVybWlzc2lvbnMiLCJyZXF1ZXN0ZWRQZXJtaXNzaW9ucyIsImdldFJlcVBlcm1pc3Npb25zIiwiZ2V0R3JhbnRlZFBlcm1pc3Npb25zIiwidG8iLCJtZW1iZXJzIiwicmV2b2tlUGVybWlzc2lvbiIsImdldFJhbmRvbURpciIsIk1hdGgiLCJyYW5kb20iLCJsb2NhbEZpbGUiLCJ0ZW1wIiwicHJlZml4Iiwic3VmZml4IiwidGVtcEZpbGUiLCJzdHJpbmdEYXRhIiwiZGlybmFtZSIsImZzIiwid3JpdGVGaWxlIiwiYWZ0ZXIiLCJleGlzdHMiLCJ1bmxpbmsiLCJhZnRlckVhY2giLCJyZW1vdGVGaWxlIiwicHVzaCIsInB1bGwiLCJyZW1vdGVEYXRhIiwicmVhZEZpbGUiLCJ0b1N0cmluZyIsInJlamVjdGVkV2l0aCIsImJ1Z3JlcG9ydCIsImEiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOztBQUdBQSxjQUFLQyxNQUFMOztBQUNBRCxjQUFLRSxHQUFMLENBQVNDLHVCQUFUOztBQUNBLElBQUlDLE1BQU0sR0FBR0osY0FBS0ksTUFBbEI7O0FBR0EsTUFB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QUFDQSxVQUFJWSxVQUFVLFNBQVNULGtCQUFHVSxRQUFILENBQVliLFFBQVosQ0FBdkI7QUFDQVksTUFBQUEsVUFBVSxDQUFDRSxRQUFYLEdBQXNCdEgsTUFBdEIsQ0FBNkJzQixLQUE3QixDQUFtQ21GLFVBQW5DO0FBQ0QsS0FUQyxFQUFGO0FBVUFyRixJQUFBQSxFQUFFLENBQUMsMERBQUQsa0NBQTZELGFBQWtCO0FBQy9FLFVBQUk2RixVQUFVLEdBQUcscUJBQWpCO0FBRUEsWUFBTWxHLEdBQUcsQ0FBQ21HLElBQUosQ0FBU2QsU0FBVCxFQUFvQmEsVUFBcEIsRUFBZ0NqSCxNQUFoQyxDQUF1Q3lDLEVBQXZDLENBQTBDOEUsWUFBMUMsQ0FBdUQsd0JBQXZELENBQU47QUFDRCxLQUpDLEVBQUY7QUFLRCxHQXZDTyxDQUFSO0FBeUNBM0csRUFBQUEsUUFBUSxDQUFDLFdBQUQsRUFBYyxZQUFZO0FBQ2hDUSxJQUFBQSxFQUFFLENBQUMsMENBQUQsa0NBQTZDLGFBQWtCO0FBQy9ELFVBQUlnQixPQUFPLENBQUNDLEdBQVIsQ0FBWUMsTUFBaEIsRUFBd0I7QUFFdEIsZUFBTyxLQUFLQyxJQUFaO0FBQ0Q7O0FBQ0QsYUFBT3hCLEdBQUcsQ0FBQ3lHLFNBQUosRUFBUCxFQUF3QnhILE1BQXhCLENBQStCeUMsRUFBL0IsQ0FBa0NnRixDQUFsQyxDQUFvQyxRQUFwQztBQUNELEtBTkMsRUFBRjtBQU9ELEdBUk8sQ0FBUjtBQVVELENBalBPLENBQVIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgY2hhaSBmcm9tICdjaGFpJztcbmltcG9ydCBjaGFpQXNQcm9taXNlZCBmcm9tICdjaGFpLWFzLXByb21pc2VkJztcbmltcG9ydCBBREIgZnJvbSAnLi4vLi4nO1xuaW1wb3J0IHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgeyByb290RGlyIH0gZnJvbSAnLi4vLi4vbGliL2hlbHBlcnMuanMnO1xuaW1wb3J0IHsgYXBpTGV2ZWwsIHBsYXRmb3JtVmVyc2lvbiwgTU9DSEFfVElNRU9VVCB9IGZyb20gJy4vc2V0dXAnO1xuaW1wb3J0IHsgZnMsIG1rZGlycCB9IGZyb20gJ2FwcGl1bS1zdXBwb3J0JztcbmltcG9ydCB0ZW1wIGZyb20gJ3RlbXAnO1xuXG5cbmNoYWkuc2hvdWxkKCk7XG5jaGFpLnVzZShjaGFpQXNQcm9taXNlZCk7XG5sZXQgZXhwZWN0ID0gY2hhaS5leHBlY3Q7XG5cbi8vIGNoYW5nZSBhY2NvcmRpbmcgdG8gQ0lcbmNvbnN0IElNRSA9ICdjb20uZXhhbXBsZS5hbmRyb2lkLnNvZnRrZXlib2FyZC8uU29mdEtleWJvYXJkJyxcbiAgICAgIGRlZmF1bHRJTUVzID0gW1xuICAgICAgICAnY29tLmFuZHJvaWQuaW5wdXRtZXRob2QubGF0aW4vLkxhdGluSU1FJyxcbiAgICAgICAgJ2NvbS5nb29nbGUuYW5kcm9pZC5pbnB1dG1ldGhvZC5sYXRpbi9jb20uYW5kcm9pZC5pbnB1dG1ldGhvZC5sYXRpbi5MYXRpbklNRScsXG4gICAgICAgICdpby5hcHBpdW0uYW5kcm9pZC5pbWUvLlVuaWNvZGVJTUUnLFxuICAgICAgXSxcbiAgICAgIGNvbnRhY3RNYW5hZ2VyUGF0aCA9IHBhdGgucmVzb2x2ZShyb290RGlyLCAndGVzdCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ2ZpeHR1cmVzJywgJ0NvbnRhY3RNYW5hZ2VyLmFwaycpLFxuICAgICAgcGtnID0gJ2NvbS5leGFtcGxlLmFuZHJvaWQuY29udGFjdG1hbmFnZXInLFxuICAgICAgYWN0aXZpdHkgPSAnQ29udGFjdE1hbmFnZXInO1xuXG5kZXNjcmliZSgnYWRiIGNvbW1hbmRzJywgZnVuY3Rpb24gKCkge1xuICB0aGlzLnRpbWVvdXQoTU9DSEFfVElNRU9VVCk7XG5cbiAgbGV0IGFkYjtcbiAgYmVmb3JlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBhZGIgPSBhd2FpdCBBREIuY3JlYXRlQURCKHsgYWRiRXhlY1RpbWVvdXQ6IDYwMDAwIH0pO1xuICB9KTtcbiAgaXQoJ2dldEFwaUxldmVsIHNob3VsZCBnZXQgY29ycmVjdCBhcGkgbGV2ZWwnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgKGF3YWl0IGFkYi5nZXRBcGlMZXZlbCgpKS5zaG91bGQuZXF1YWwoYXBpTGV2ZWwpO1xuICB9KTtcbiAgaXQoJ2dldFBsYXRmb3JtVmVyc2lvbiBzaG91bGQgZ2V0IGNvcnJlY3QgcGxhdGZvcm0gdmVyc2lvbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAoYXdhaXQgYWRiLmdldFBsYXRmb3JtVmVyc2lvbigpKS5zaG91bGQuaW5jbHVkZShwbGF0Zm9ybVZlcnNpb24pO1xuICB9KTtcbiAgaXQoJ2F2YWlsYWJsZUlNRXMgc2hvdWxkIGdldCBsaXN0IG9mIGF2YWlsYWJsZSBJTUVzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIChhd2FpdCBhZGIuYXZhaWxhYmxlSU1FcygpKS5zaG91bGQuaGF2ZS5sZW5ndGguYWJvdmUoMCk7XG4gIH0pO1xuICBpdCgnZW5hYmxlZElNRXMgc2hvdWxkIGdldCBsaXN0IG9mIGVuYWJsZWQgSU1FcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAoYXdhaXQgYWRiLmVuYWJsZWRJTUVzKCkpLnNob3VsZC5oYXZlLmxlbmd0aC5hYm92ZSgwKTtcbiAgfSk7XG4gIGl0KCdkZWZhdWx0SU1FIHNob3VsZCBnZXQgZGVmYXVsdCBJTUUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgY29uc3QgZGVmYXVsdElNRSA9IGF3YWl0IGFkYi5kZWZhdWx0SU1FKCk7XG4gICAgaWYgKGRlZmF1bHRJTUUpIHtcbiAgICAgIGRlZmF1bHRJTUVzLnNob3VsZC5pbmNsdWRlKGRlZmF1bHRJTUUpO1xuICAgIH1cbiAgfSk7XG4gIGl0KCdlbmFibGVJTUUgYW5kIGRpc2FibGVJTUUgc2hvdWxkIGVuYWJsZSBhbmQgZGlzYmxlIElNRScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBhd2FpdCBhZGIuZGlzYWJsZUlNRShJTUUpO1xuICAgIChhd2FpdCBhZGIuZW5hYmxlZElNRXMoKSkuc2hvdWxkLm5vdC5pbmNsdWRlKElNRSk7XG4gICAgYXdhaXQgYWRiLmVuYWJsZUlNRShJTUUpO1xuICAgIChhd2FpdCBhZGIuZW5hYmxlZElNRXMoKSkuc2hvdWxkLmluY2x1ZGUoSU1FKTtcbiAgICBhd2FpdCBhZGIuZW5hYmxlZElNRXMoKTtcbiAgfSk7XG4gIGl0KCdwcm9jZXNzRXhpc3RzIHNob3VsZCBiZSBhYmxlIHRvIGZpbmQgdWkgcHJvY2VzcycsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFJBVklTKSB7XG4gICAgICAvLyBUaGlzIHRlc3QgaXMgdW5zdGFibGUgb24gVHJhdmlzXG4gICAgICByZXR1cm4gdGhpcy5za2lwKCk7XG4gICAgfVxuICAgIChhd2FpdCBhZGIucHJvY2Vzc0V4aXN0cygnY29tLmFuZHJvaWQuc3lzdGVtdWknKSkuc2hvdWxkLmJlLnRydWU7XG4gIH0pO1xuICBpdCgncGluZyBzaG91bGQgcmV0dXJuIHRydWUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgKGF3YWl0IGFkYi5waW5nKCkpLnNob3VsZC5iZS50cnVlO1xuICB9KTtcbiAgaXQoJ2dldFBJRHNCeU5hbWUgc2hvdWxkIHJldHVybiBwaWRzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIChhd2FpdCBhZGIuZ2V0UElEc0J5TmFtZSgnbS5hbmRyb2lkLnBob25lJykpLnNob3VsZC5oYXZlLmxlbmd0aC5hYm92ZSgwKTtcbiAgfSk7XG4gIGl0KCdraWxsUHJvY2Vzc2VzQnlOYW1lIHNob3VsZCBraWxsIHByb2Nlc3MnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgYXdhaXQgYWRiLmluc3RhbGwoY29udGFjdE1hbmFnZXJQYXRoKTtcbiAgICBhd2FpdCBhZGIuc3RhcnRBcHAoe3BrZywgYWN0aXZpdHl9KTtcbiAgICBhd2FpdCBhZGIua2lsbFByb2Nlc3Nlc0J5TmFtZShwa2cpO1xuICAgIChhd2FpdCBhZGIuZ2V0UElEc0J5TmFtZShwa2cpKS5zaG91bGQuaGF2ZS5sZW5ndGgoMCk7XG4gIH0pO1xuICBpdCgna2lsbFByb2Nlc3NCeVBJRCBzaG91bGQga2lsbCBwcm9jZXNzJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGF3YWl0IGFkYi5pbnN0YWxsKGNvbnRhY3RNYW5hZ2VyUGF0aCk7XG4gICAgYXdhaXQgYWRiLnN0YXJ0QXBwKHtwa2csIGFjdGl2aXR5fSk7XG4gICAgbGV0IHBpZHMgPSBhd2FpdCBhZGIuZ2V0UElEc0J5TmFtZShwa2cpO1xuICAgIHBpZHMuc2hvdWxkLmhhdmUubGVuZ3RoLmFib3ZlKDApO1xuICAgIGF3YWl0IGFkYi5raWxsUHJvY2Vzc0J5UElEKHBpZHNbMF0pO1xuICAgIChhd2FpdCBhZGIuZ2V0UElEc0J5TmFtZShwa2cpKS5sZW5ndGguc2hvdWxkLmVxdWFsKDApO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBnZXQgZGV2aWNlIGxhbmd1YWdlIGFuZCBjb3VudHJ5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGlmIChwYXJzZUludChhcGlMZXZlbCwgMTApID49IDIzKSByZXR1cm4gdGhpcy5za2lwKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFJBVklTKSByZXR1cm4gdGhpcy5za2lwKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcblxuICAgIFsnZW4nLCAnZnInXS5zaG91bGQuY29udGFpbihhd2FpdCBhZGIuZ2V0RGV2aWNlU3lzTGFuZ3VhZ2UoKSk7XG4gICAgWydVUycsICdFTl9VUycsICdFTicsICdGUiddLnNob3VsZC5jb250YWluKGF3YWl0IGFkYi5nZXREZXZpY2VTeXNDb3VudHJ5KCkpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBzZXQgZGV2aWNlIGxhbmd1YWdlIGFuZCBjb3VudHJ5JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGlmIChwYXJzZUludChhcGlMZXZlbCwgMTApID49IDIzKSByZXR1cm4gdGhpcy5za2lwKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcbiAgICBpZiAocHJvY2Vzcy5lbnYuVFJBVklTKSByZXR1cm4gdGhpcy5za2lwKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcblxuICAgIGF3YWl0IGFkYi5zZXREZXZpY2VTeXNMYW5ndWFnZSgnZnInKTtcbiAgICBhd2FpdCBhZGIuc2V0RGV2aWNlU3lzQ291bnRyeSgnZnInKTtcbiAgICBhd2FpdCBhZGIucmVib290KCk7XG4gICAgYXdhaXQgYWRiLmdldERldmljZVN5c0xhbmd1YWdlKCkuc2hvdWxkLmV2ZW50dWFsbHkuZXF1YWwoJ2ZyJyk7XG4gICAgYXdhaXQgYWRiLmdldERldmljZVN5c0NvdW50cnkoKS5zaG91bGQuZXZlbnR1YWxseS5lcXVhbCgnRlInKTtcbiAgICAvLyBjbGVhbnVwXG4gICAgYXdhaXQgYWRiLnNldERldmljZVN5c0xhbmd1YWdlKCdlbicpO1xuICAgIGF3YWl0IGFkYi5zZXREZXZpY2VTeXNDb3VudHJ5KCd1cycpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBnZXQgZGV2aWNlIGxvY2FsZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBpZiAocGFyc2VJbnQoYXBpTGV2ZWwsIDEwKSA8IDIzKSByZXR1cm4gdGhpcy5za2lwKCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgY3VybHlcblxuICAgIGF3YWl0IGFkYi5zZXREZXZpY2VTeXNMb2NhbGVWaWFTZXR0aW5nQXBwKCdlbicsICdVUycpO1xuICAgIFsndXMnLCAnZW4nLCAnY2FfZW4nLCAnZW4tVVMnXS5zaG91bGQuY29udGFpbihhd2FpdCBhZGIuZ2V0RGV2aWNlTG9jYWxlKCkpO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBmb3J3YXJkIHRoZSBwb3J0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGF3YWl0IGFkYi5mb3J3YXJkUG9ydCg0NzI0LCA0NzI0KTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgcmVtb3ZlIGZvcndhcmRlZCBwb3J0JywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGF3YWl0IGFkYi5mb3J3YXJkUG9ydCg4MjAwLCA2NzkwKTtcbiAgICAoYXdhaXQgYWRiLmFkYkV4ZWMoW2Bmb3J3YXJkYCwgYC0tbGlzdGBdKSkuc2hvdWxkLmNvbnRhaW4oJ3RjcDo4MjAwJyk7XG4gICAgYXdhaXQgYWRiLnJlbW92ZVBvcnRGb3J3YXJkKDgyMDApO1xuICAgIChhd2FpdCBhZGIuYWRiRXhlYyhbYGZvcndhcmRgLCBgLS1saXN0YF0pKS5zaG91bGQubm90LmNvbnRhaW4oJ3RjcDo4MjAwJyk7XG5cbiAgfSk7XG4gIGl0KCdzaG91bGQgc3RhcnQgbG9nY2F0IGZyb20gYWRiJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIGF3YWl0IGFkYi5zdGFydExvZ2NhdCgpO1xuICAgIGxldCBsb2dzID0gYWRiLmxvZ2NhdC5nZXRMb2dzKCk7XG4gICAgbG9ncy5zaG91bGQuaGF2ZS5sZW5ndGguYWJvdmUoMCk7XG4gICAgYXdhaXQgYWRiLnN0b3BMb2djYXQoKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZ2V0IG1vZGVsJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIChhd2FpdCBhZGIuZ2V0TW9kZWwoKSkuc2hvdWxkLm5vdC5iZS5udWxsO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBnZXQgbWFudWZhY3R1cmVyJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIChhd2FpdCBhZGIuZ2V0TWFudWZhY3R1cmVyKCkpLnNob3VsZC5ub3QuYmUubnVsbDtcbiAgfSk7XG4gIGl0KCdzaG91bGQgZ2V0IHNjcmVlbiBzaXplJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIChhd2FpdCBhZGIuZ2V0U2NyZWVuU2l6ZSgpKS5zaG91bGQubm90LmJlLm51bGw7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGdldCBzY3JlZW4gZGVuc2l0eScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAoYXdhaXQgYWRiLmdldFNjcmVlbkRlbnNpdHkoKSkuc2hvdWxkLm5vdC5iZS5udWxsO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIHRvZ2dsZSBncHMgbG9jYXRpb24gcHJvdmlkZXInLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgYXdhaXQgYWRiLnRvZ2dsZUdQU0xvY2F0aW9uUHJvdmlkZXIodHJ1ZSk7XG4gICAgKGF3YWl0IGFkYi5nZXRMb2NhdGlvblByb3ZpZGVycygpKS5zaG91bGQuaW5jbHVkZSgnZ3BzJyk7XG4gICAgYXdhaXQgYWRiLnRvZ2dsZUdQU0xvY2F0aW9uUHJvdmlkZXIoZmFsc2UpO1xuICAgIChhd2FpdCBhZGIuZ2V0TG9jYXRpb25Qcm92aWRlcnMoKSkuc2hvdWxkLm5vdC5pbmNsdWRlKCdncHMnKTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgYmUgYWJsZSB0byB0b29nbGUgYWlycGxhbmUgbW9kZScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICBhd2FpdCBhZGIuc2V0QWlycGxhbmVNb2RlKHRydWUpO1xuICAgIChhd2FpdCBhZGIuaXNBaXJwbGFuZU1vZGVPbigpKS5zaG91bGQuYmUudHJ1ZTtcbiAgICBhd2FpdCBhZGIuc2V0QWlycGxhbmVNb2RlKGZhbHNlKTtcbiAgICAoYXdhaXQgYWRiLmlzQWlycGxhbmVNb2RlT24oKSkuc2hvdWxkLmJlLmZhbHNlO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIHRvb2dsZSB3aWZpIEBza2lwLWNpJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgIHRoaXMucmV0cmllcygzKTtcblxuICAgIGF3YWl0IGFkYi5zZXRXaWZpU3RhdGUodHJ1ZSk7XG4gICAgKGF3YWl0IGFkYi5pc1dpZmlPbigpKS5zaG91bGQuYmUudHJ1ZTtcbiAgICBhd2FpdCBhZGIuc2V0V2lmaVN0YXRlKGZhbHNlKTtcbiAgICAoYXdhaXQgYWRiLmlzV2lmaU9uKCkpLnNob3VsZC5iZS5mYWxzZTtcbiAgfSk7XG4gIGl0KCdzaG91bGQgYmUgYWJsZSB0byB0dXJuIG9mZiBhbmltYXRpb24gQHNraXAtY2knLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgYXdhaXQgYWRiLmdyYW50UGVybWlzc2lvbignaW8uYXBwaXVtLnNldHRpbmdzJywgJ2FuZHJvaWQucGVybWlzc2lvbi5TRVRfQU5JTUFUSU9OX1NDQUxFJyk7XG5cbiAgICBhd2FpdCBhZGIuc2V0QW5pbWF0aW9uU3RhdGUoZmFsc2UpO1xuICAgIChhd2FpdCBhZGIuaXNBbmltYXRpb25PbigpKS5zaG91bGQuYmUuZmFsc2U7XG4gIH0pO1xuICBpdCgnc2hvdWxkIGJlIGFibGUgdG8gdHVybiBvbiBhbmltYXRpb24gQHNraXAtY2knLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgYXdhaXQgYWRiLmdyYW50UGVybWlzc2lvbignaW8uYXBwaXVtLnNldHRpbmdzJywgJ2FuZHJvaWQucGVybWlzc2lvbi5TRVRfQU5JTUFUSU9OX1NDQUxFJyk7XG5cbiAgICBhd2FpdCBhZGIuc2V0QW5pbWF0aW9uU3RhdGUodHJ1ZSk7XG4gICAgKGF3YWl0IGFkYi5pc0FuaW1hdGlvbk9uKCkpLnNob3VsZC5iZS50cnVlO1xuICB9KTtcbiAgaXQoJ3Nob3VsZCBiZSBhYmxlIHRvIHNldCBkZXZpY2UgbG9jYWxlIHZpYSBzZXR0aW5nIGFwcCBAc2tpcC1jaScsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAvLyBPcGVyYXRpb24gbm90IGFsbG93ZWQ6IGphdmEubGFuZy5TZWN1cml0eUV4Y2VwdGlvbjogUGFja2FnZSBpby5hcHBpdW0uc2V0dGluZ3MgaGFzIG5vdCByZXF1ZXN0ZWQgcGVybWlzc2lvbiBhbmRyb2lkLnBlcm1pc3Npb24uQ0hBTkdFX0NPTkZJR1VSQVRJT05cbiAgICAvLyBpcyBzaG93biBpZiB0aGUgc2V0dGluZyBhcGsgaXMgbm90IHVwZGF0ZWQuXG4gICAgYXdhaXQgYWRiLmdyYW50UGVybWlzc2lvbignaW8uYXBwaXVtLnNldHRpbmdzJywgJ2FuZHJvaWQucGVybWlzc2lvbi5DSEFOR0VfQ09ORklHVVJBVElPTicpO1xuXG4gICAgYXdhaXQgYWRiLnNldERldmljZVN5c0xvY2FsZVZpYVNldHRpbmdBcHAoJ2ZyJywgJ2ZyJyk7XG4gICAgKGF3YWl0IGFkYi5nZXREZXZpY2VTeXNMb2NhbGUoKSkuc2hvdWxkLmVxdWFsKCdmci1GUicpO1xuXG4gICAgYXdhaXQgYWRiLnNldERldmljZVN5c0xvY2FsZVZpYVNldHRpbmdBcHAoJ3poJywgJ0NOJywgJ0hhbnMnKTtcbiAgICAoYXdhaXQgYWRiLmdldERldmljZVN5c0xvY2FsZSgpKS5zaG91bGQuZXF1YWwoJ3poLUhhbnMtQ04nKTtcblxuICAgIGF3YWl0IGFkYi5zZXREZXZpY2VTeXNMb2NhbGVWaWFTZXR0aW5nQXBwKCdlbicsICd1cycpO1xuICAgIChhd2FpdCBhZGIuZ2V0RGV2aWNlU3lzTG9jYWxlKCkpLnNob3VsZC5lcXVhbCgnZW4tVVMnKTtcbiAgfSk7XG4gIGRlc2NyaWJlKCdhcHAgcGVybWlzc2lvbnMnLCBmdW5jdGlvbiAoKSB7XG4gICAgYmVmb3JlKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCBkZXZpY2VBcGlMZXZlbCA9IGF3YWl0IGFkYi5nZXRBcGlMZXZlbCgpO1xuICAgICAgaWYgKGRldmljZUFwaUxldmVsIDwgMjMpIHtcbiAgICAgICAgLy90ZXN0IHNob3VsZCBza2lwIGlmIHRoZSBkZXZpY2UgQVBJIDwgMjNcbiAgICAgICAgcmV0dXJuIHRoaXMuc2tpcCgpO1xuICAgICAgfVxuICAgICAgbGV0IGlzSW5zdGFsbGVkID0gYXdhaXQgYWRiLmlzQXBwSW5zdGFsbGVkKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJyk7XG4gICAgICBpZiAoaXNJbnN0YWxsZWQpIHtcbiAgICAgICAgYXdhaXQgYWRiLnVuaW5zdGFsbEFwaygnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgaW5zdGFsbCBhbmQgZ3JhbnQgYWxsIHBlcm1pc3Npb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgYXBpRGVtb3MgPSBwYXRoLnJlc29sdmUocm9vdERpciwgJ3Rlc3QnLFxuICAgICAgICAgICdmaXh0dXJlcycsICdBcGlEZW1vcy1kZWJ1Zy5hcGsnKTtcbiAgICAgIGF3YWl0IGFkYi5pbnN0YWxsKGFwaURlbW9zKTtcbiAgICAgIChhd2FpdCBhZGIuaXNBcHBJbnN0YWxsZWQoJ2lvLmFwcGl1bS5hbmRyb2lkLmFwaXMnKSkuc2hvdWxkLmJlLnRydWU7XG4gICAgICBhd2FpdCBhZGIuZ3JhbnRBbGxQZXJtaXNzaW9ucygnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycpO1xuICAgICAgbGV0IHJlcXVlc3RlZFBlcm1pc3Npb25zID0gYXdhaXQgYWRiLmdldFJlcVBlcm1pc3Npb25zKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJyk7XG4gICAgICBleHBlY3QoYXdhaXQgYWRiLmdldEdyYW50ZWRQZXJtaXNzaW9ucygnaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycpKS50by5oYXZlLm1lbWJlcnMocmVxdWVzdGVkUGVybWlzc2lvbnMpO1xuICAgIH0pO1xuICAgIGl0KCdzaG91bGQgcmV2b2tlIHBlcm1pc3Npb24nLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBhZGIucmV2b2tlUGVybWlzc2lvbignaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycsICdhbmRyb2lkLnBlcm1pc3Npb24uUkVDRUlWRV9TTVMnKTtcbiAgICAgIGV4cGVjdChhd2FpdCBhZGIuZ2V0R3JhbnRlZFBlcm1pc3Npb25zKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJykpLnRvLm5vdC5oYXZlLm1lbWJlcnMoWydhbmRyb2lkLnBlcm1pc3Npb24uUkVDRUlWRV9TTVMnXSk7XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBncmFudCBwZXJtaXNzaW9uJywgYXN5bmMgZnVuY3Rpb24gKCkge1xuICAgICAgYXdhaXQgYWRiLmdyYW50UGVybWlzc2lvbignaW8uYXBwaXVtLmFuZHJvaWQuYXBpcycsICdhbmRyb2lkLnBlcm1pc3Npb24uUkVDRUlWRV9TTVMnKTtcbiAgICAgIGV4cGVjdChhd2FpdCBhZGIuZ2V0R3JhbnRlZFBlcm1pc3Npb25zKCdpby5hcHBpdW0uYW5kcm9pZC5hcGlzJykpLnRvLmluY2x1ZGUubWVtYmVycyhbJ2FuZHJvaWQucGVybWlzc2lvbi5SRUNFSVZFX1NNUyddKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ3B1c2ggZmlsZScsIGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBnZXRSYW5kb21EaXIgKCkge1xuICAgICAgcmV0dXJuIGAvZGF0YS9sb2NhbC90bXAvdGVzdCR7TWF0aC5yYW5kb20oKX1gO1xuICAgIH1cblxuICAgIGxldCBsb2NhbEZpbGUgPSB0ZW1wLnBhdGgoe3ByZWZpeDogJ2FwcGl1bScsIHN1ZmZpeDogJy50bXAnfSk7XG4gICAgbGV0IHRlbXBGaWxlID0gdGVtcC5wYXRoKHtwcmVmaXg6ICdhcHBpdW0nLCBzdWZmaXg6ICcudG1wJ30pO1xuICAgIGNvbnN0IHN0cmluZ0RhdGEgPSBgcmFuZG9tIHN0cmluZyBkYXRhICR7TWF0aC5yYW5kb20oKX1gO1xuICAgIGJlZm9yZShhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBhd2FpdCBta2RpcnAocGF0aC5kaXJuYW1lKGxvY2FsRmlsZSkpO1xuICAgICAgYXdhaXQgbWtkaXJwKHBhdGguZGlybmFtZSh0ZW1wRmlsZSkpO1xuXG4gICAgICBhd2FpdCBmcy53cml0ZUZpbGUobG9jYWxGaWxlLCBzdHJpbmdEYXRhKTtcbiAgICB9KTtcbiAgICBhZnRlcihhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAoYXdhaXQgZnMuZXhpc3RzKGxvY2FsRmlsZSkpIHtcbiAgICAgICAgYXdhaXQgZnMudW5saW5rKGxvY2FsRmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgYWZ0ZXJFYWNoKGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmIChhd2FpdCBmcy5leGlzdHModGVtcEZpbGUpKSB7XG4gICAgICAgIGF3YWl0IGZzLnVubGluayh0ZW1wRmlsZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgaXQoJ3Nob3VsZCBwdXNoIGZpbGUgdG8gYSB2YWxpZCBsb2NhdGlvbicsIGFzeW5jIGZ1bmN0aW9uICgpIHtcbiAgICAgIGxldCByZW1vdGVGaWxlID0gYCR7Z2V0UmFuZG9tRGlyKCl9L3JlbW90ZS50eHRgO1xuXG4gICAgICBhd2FpdCBhZGIucHVzaChsb2NhbEZpbGUsIHJlbW90ZUZpbGUpO1xuXG4gICAgICAvLyBnZXQgdGhlIGZpbGUgYW5kIGl0cyBjb250ZW50cywgdG8gY2hlY2tcbiAgICAgIGF3YWl0IGFkYi5wdWxsKHJlbW90ZUZpbGUsIHRlbXBGaWxlKTtcbiAgICAgIGxldCByZW1vdGVEYXRhID0gYXdhaXQgZnMucmVhZEZpbGUodGVtcEZpbGUpO1xuICAgICAgcmVtb3RlRGF0YS50b1N0cmluZygpLnNob3VsZC5lcXVhbChzdHJpbmdEYXRhKTtcbiAgICB9KTtcbiAgICBpdCgnc2hvdWxkIHRocm93IGVycm9yIGlmIGl0IGNhbm5vdCB3cml0ZSB0byB0aGUgcmVtb3RlIGZpbGUnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBsZXQgcmVtb3RlRmlsZSA9ICcvZm9vL2Jhci9yZW1vdGUudHh0JztcblxuICAgICAgYXdhaXQgYWRiLnB1c2gobG9jYWxGaWxlLCByZW1vdGVGaWxlKS5zaG91bGQuYmUucmVqZWN0ZWRXaXRoKC9cXC9mb29cXC9iYXJcXC9yZW1vdGUudHh0Lyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdidWdyZXBvcnQnLCBmdW5jdGlvbiAoKSB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdGhlIHJlcG9ydCBhcyBhIHJhdyBzdHJpbmcnLCBhc3luYyBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnYuVFJBVklTKSB7XG4gICAgICAgIC8vIHNraXAgdGhlIHRlc3Qgb24gQ0ksIHNpbmNlIGl0IHRha2VzIGEgbG90IG9mIHRpbWVcbiAgICAgICAgcmV0dXJuIHRoaXMuc2tpcDtcbiAgICAgIH1cbiAgICAgIChhd2FpdCBhZGIuYnVncmVwb3J0KCkpLnNob3VsZC5iZS5hKCdzdHJpbmcnKTtcbiAgICB9KTtcbiAgfSk7XG5cbn0pO1xuIl0sImZpbGUiOiJ0ZXN0L2Z1bmN0aW9uYWwvYWRiLWNvbW1hbmRzLWUyZS1zcGVjcy5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLi8uLiJ9
